<section class="container" id="comentarios">
  <div class="d-flex gap-2 align-items-center p-3 my-3 text-white text-bg-primary rounded">
    <i class="bi bi-box2-heart fs-4"></i>
    <h3 class="m-0">Comentarios</h3>
  </div>

  <div class="my-3 p-3 bg-body rounded" id="comentarios-container">
    <app-comentario 
      *ngFor="let c of comentarios"
      [calificacion]="c.calificacion"
      [comentario]="c.contenido">
    </app-comentario>
  </div>

  <form id="form-comentario" [formGroup]="comentarioForm" (ngSubmit)="agregarComentario()" class="p-3">
    <div *ngIf="!usuarioAutenticado" class="alert alert-warning">
      Debes iniciar sesión para agregar un comentario.
    </div>
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <div>
      <label for="contenido" class="form-label">Comentario</label>
      <textarea class="form-control" id="contenido" formControlName="contenido" rows="3" required></textarea>
    </div>
    <div class="mb-3">
      <label for="calificacion" class="form-label">Calificación (1-10)</label>
      <input type="number" class="form-control" id="calificacion" formControlName="calificacion" min="1" max="10" step="0.1" required>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="!usuarioAutenticado">Enviar</button>
  </form>
</section>
